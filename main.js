window.addEventListener("load",(()=>{const t=gsap.timeline({defaults:{ease:"power3.inOut",duration:1.2}});"undefined"!=typeof lenis&&lenis.stop(),t.to(".preloader",{scaleY:0,transformOrigin:"top center",onComplete:()=>{"undefined"!=typeof lenis&&lenis.start()}})}));const nav=document.querySelector(".floating-nav");let lastScrollTop=0,navVisible=!0;const hideOffsetRatio=.2;let hideOffset=.2*window.innerHeight;window.addEventListener("resize",(()=>{hideOffset=.2*window.innerHeight}));const showNav=()=>{navVisible||(nav.style.transform="translateY(0)",navVisible=!0)},hideNav=()=>{navVisible&&(nav.style.transform="translateY(-120%)",navVisible=!1)};let ticking=!1;function initButtonCharacterStagger(){document.querySelectorAll("[data-button-animate-chars]").forEach((t=>{const e=t.textContent;t.innerHTML="",[...e].forEach(((e,n)=>{const a=document.createElement("span");a.textContent=e,a.style.transitionDelay=.01*n+"s"," "===e&&(a.style.whiteSpace="pre"),t.appendChild(a)}))}))}window.addEventListener("scroll",(()=>{const t=window.scrollY;ticking||(window.requestAnimationFrame((()=>{t<hideOffset||t>lastScrollTop?hideNav():t<lastScrollTop&&(navVisible||(nav.style.transform="translateY(0)",navVisible=!0)),lastScrollTop=Math.max(t,0),ticking=!1})),ticking=!0)})),document.addEventListener("DOMContentLoaded",(()=>{document.querySelectorAll("[data-letter-reveal='true']").forEach((t=>{const e=new SplitText(t,{type:"words, chars",mask:"words",wordsClass:"word",charsClass:"char"});gsap.timeline({scrollTrigger:{trigger:t,start:"top bottom",end:"top 80%",toggleActions:"none play none reset"}}).from(e.chars,{yPercent:110,opacity:1,delay:.8,duration:.8,ease:"power3.out",stagger:{amount:.5}}),gsap.set(t,{visibility:"visible"})}));const t=document.querySelectorAll(".nav-links-wrap a");gsap.set(t,{visibility:"hidden",opacity:0,y:50}),gsap.to(t,{visibility:"visible",opacity:1,y:0,duration:.4,ease:"power3.out",stagger:{each:.02},delay:1.2})})),document.addEventListener("DOMContentLoaded",(()=>{initButtonCharacterStagger()})),gsap.set(".cursor",{xPercent:5,yPercent:40});let xTo=gsap.quickTo(".cursor","x",{duration:.6,ease:"power3"}),yTo=gsap.quickTo(".cursor","y",{duration:.6,ease:"power3"});function initBunnyPlayerBasic(){function t(t,e){e||"true"===t.getAttribute("data-player-activated")||"idle"!==t.getAttribute("data-player-status")||t.setAttribute("data-player-status","ready")}function e(t,e,n,a){if("true"===e&&n&&a){var i=t.querySelector("[data-player-before]");i&&(i.style.paddingTop=a/n*100+"%")}}function n(t){return t&&t.length?t.reduce((function(t,e){return(e.width||0)>(t.width||0)?e:t}),t[0]):null}document.querySelectorAll("[data-bunny-player-init]").forEach((function(a){var i=a.getAttribute("data-player-src");if(i){var r=a.querySelector("video");if(r){try{r.pause()}catch(t){}try{r.removeAttribute("src"),r.load()}catch(t){}a.hasAttribute("data-player-activated")||E(!1);var o=a.getAttribute("data-player-update-size"),d=a.getAttribute("data-player-lazy"),s="true"===d,l="meta"===d,u="true"===a.getAttribute("data-player-autoplay"),c=!1;r.muted=!!u,u&&(r.loop=!0),r.setAttribute("muted",""),r.setAttribute("playsinline",""),r.setAttribute("webkit-playsinline",""),r.playsInline=!0,void 0!==r.disableRemotePlayback&&(r.disableRemotePlayback=!0),u&&(r.autoplay=!1);var p=!!r.canPlayType("application/vnd.apple.mpegurl"),f=!(!window.Hls||!Hls.isSupported()||p);if("true"===o&&!l)if(s);else{var h=r.preload;r.preload="metadata";var v=function(){e(a,o,r.videoWidth,r.videoHeight),r.removeEventListener("loadedmetadata",v),r.preload=h||""};r.addEventListener("loadedmetadata",v,{once:!0}),r.src=i}var y=!1,g="";l?("true"===o&&function(t,e){return new Promise((function(a){if(e&&window.Hls&&Hls.isSupported())try{var i=new Hls,r={width:0,height:0,duration:NaN};return i.on(Hls.Events.MANIFEST_PARSED,(function(t,e){var a=n(e&&e.levels||i.levels||[]);a&&a.width&&a.height&&(r.width=a.width,r.height=a.height)})),i.on(Hls.Events.LEVEL_LOADED,(function(t,e){e&&e.details&&isFinite(e.details.totalduration)&&(r.duration=e.details.totalduration)})),i.on(Hls.Events.ERROR,(function(){try{i.destroy()}catch(t){}a(r)})),i.on(Hls.Events.LEVEL_LOADED,(function(){try{i.destroy()}catch(t){}a(r)})),void i.loadSource(t)}catch(t){return void a({width:0,height:0,duration:NaN})}function o(t){for(var e=t.split(/\r?\n/),n=0,a=0,i=null,r=null,o=0;o<e.length;o++){var d=e[o];if(0===d.indexOf("#EXT-X-STREAM-INF:"))r=d;else if(r&&d&&"#"!==d[0]){i||(i=d.trim());var s=/RESOLUTION=(\d+)x(\d+)/.exec(r);if(s){var l=parseInt(s[1],10),u=parseInt(s[2],10);l>n&&(n=l,a=u)}r=null}}return{bestW:n,bestH:a,media:i}}function d(t){for(var e,n=0,a=/#EXTINF:([\d.]+)/g;e=a.exec(t);)n+=parseFloat(e[1]);return n}fetch(t,{credentials:"omit",cache:"no-store"}).then((function(t){if(!t.ok)throw new Error("master");return t.text()})).then((function(e){var n=o(e);if(n.media){var i=function(t,e){try{return new URL(e,t).toString()}catch(t){return e}}(t,n.media);return fetch(i,{credentials:"omit",cache:"no-store"}).then((function(t){if(!t.ok)throw new Error("media");return t.text()})).then((function(t){a({width:n.bestW||0,height:n.bestH||0,duration:d(t)})}))}a({width:n.bestW||0,height:n.bestH||0,duration:NaN})})).catch((function(){a({width:0,height:0,duration:NaN})}))}))}(i,f).then((function(n){n.width&&n.height&&e(a,o,n.width,n.height),t(a,c)})),r.preload="none"):s?r.preload="none":b(),a.addEventListener("click",(function(t){var e=t.target.closest("[data-player-control]");if(e&&a.contains(e)){var n=e.getAttribute("data-player-control");"play"===n||"pause"===n||"playpause"===n?A():"mute"===n&&(r.muted=!r.muted,a.setAttribute("data-player-muted",r.muted?"true":"false"))}})),r.addEventListener("play",(function(){E(!0),w("playing")})),r.addEventListener("playing",(function(){c=!1,w("playing")})),r.addEventListener("pause",(function(){c=!1,w("paused")})),r.addEventListener("waiting",(function(){w("loading")})),r.addEventListener("canplay",(function(){t(a,c)})),r.addEventListener("ended",(function(){c=!1,w("paused"),E(!1)}));var m=!1;if(r.addEventListener("loadedmetadata",(function(){L()})),r.addEventListener("loadeddata",(function(){L()})),r.addEventListener("playing",(function(){L()})),a.addEventListener("pointerenter",(function(){S("active")})),a.addEventListener("pointerleave",(function(){S("idle")})),u)new IntersectionObserver((function(t){t.forEach((function(t){t.isIntersecting&&t.intersectionRatio>0?(!s&&!l||y||b(),("io"===g||r.paused&&"manual"!==g)&&(w("loading"),r.paused&&A(),g="")):r.paused||r.ended||(g="io",r.pause())}))}),{threshold:.1}).observe(a)}}function w(t){a.getAttribute("data-player-status")!==t&&a.setAttribute("data-player-status",t)}function E(t){a.setAttribute("data-player-activated",t?"true":"false")}function b(){if(!y){if(y=!0,a._hls){try{a._hls.destroy()}catch(t){}a._hls=null}if(p)r.preload=s||l?"auto":r.preload,r.src=i,r.addEventListener("loadedmetadata",(function(){t(a,c),"true"===o&&e(a,o,r.videoWidth,r.videoHeight)}),{once:!0});else if(f){var d=new Hls({maxBufferLength:10});d.attachMedia(r),d.on(Hls.Events.MEDIA_ATTACHED,(function(){d.loadSource(i)})),d.on(Hls.Events.MANIFEST_PARSED,(function(){if(t(a,c),"true"===o){var i=n(d.levels||[]);i&&i.width&&i.height&&e(a,o,i.width,i.height)}})),a._hls=d}else r.src=i}}function A(){!0,r.paused||r.ended?(!s&&!l||y||b(),c=!0,g="",w("loading"),function(t){var e=t.play();e&&"function"==typeof e.then&&e.catch((function(){}))}(r)):(g="manual",r.pause())}function L(){if(!m&&"true"===o){var t=a.querySelector("[data-player-before]");t&&r.videoWidth&&r.videoHeight&&(t.style.paddingTop=r.videoHeight/r.videoWidth*100+"%",m=!0)}}function S(t){a.getAttribute("data-player-hover")!==t&&a.setAttribute("data-player-hover",t)}}))}document.querySelectorAll(".project_card").forEach((t=>{t.addEventListener("mouseenter",(t=>{xTo(t.clientX),yTo(t.clientY)}))})),window.addEventListener("mousemove",(t=>{xTo(t.clientX),yTo(t.clientY)})),document.addEventListener("DOMContentLoaded",(function(){initBunnyPlayerBasic()}));
